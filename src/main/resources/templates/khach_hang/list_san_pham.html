<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta http-equiv="x-ua-compatible" content="ie=edge"/>
    <title>Danh sách sản phẩm</title>
    <link rel="shortcut icon" href="/assets/images/Shoes6cop.png"/>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css"/>
    <!-- Google Fonts Roboto -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"/>
    <!-- BootStrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        /* Style.css */


        .main {
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            padding: 20px;
            transition: transform 0.2s;
            width: 600px;
        }

        .main:hover {
            transform: scale(1.05);
        }

        .gfg {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 600;
            color: #01940b;
        }

        .custom-wrapper {
            margin: 0;
            width: 70%;
            padding: 0px 25px 40px;
            position: relative;
            left: 63px;
        }

        .header h2 {
            font-size: 30px;
            color: #01940b;
            display: flex;
            justify-content: center;
            padding: 20px;
        }

        /* Styles for the price input container */
        .price-input-container {
            width: 100%;
        }

        .price-input .price-field {
            display: flex;
            margin-bottom: 22px;
        }

        .price-field span {
            margin-right: 10px;
            margin-top: 6px;
            font-size: 14px;
        }

        .price-field-span2 {
            margin-right: 10px;
            margin-top: 6px;
            font-size: 14px;
            margin-left: 7px;
        }

        .price-field input {
            flex: 1;
            height: 30px;
            width: 60px;
            font-size: 12px;
            font-family: "DM Sans", sans-serif;
            border-radius: 9px;
            text-align: center;
            border: 0px;
            background: #e4e4e4;
        }

        .price-input {
            width: 100%;
            font-size: 14px;
            color: #555;
        }

        /* Remove Arrows/Spinners */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .slider-container {
            width: 100%;
        }

        .slider-container {
            height: 6px;
            position: relative;
            background: #e4e4e4;
            border-radius: 5px;
            /*margin-left: 35px;*/
        }

        .slider-container .price-slider {
            height: 100%;

            position: absolute;
            border-radius: 5px;
            background: #0d6efd;
        }

        .range-input {
            position: relative;
        }

        .range-input input {
            position: absolute;
            width: 100%;
            height: 5px;
            background: none;
            top: -5px;
            pointer-events: none;
            cursor: pointer;
            -webkit-appearance: none;
        }

        /* Styles for the range thumb in WebKit browsers */
        input[type="range"]::-webkit-slider-thumb {
            height: 18px;
            width: 18px;
            border-radius: 70%;
            background: #0d6efd;
            pointer-events: auto;
            -webkit-appearance: none;
            /*margin-left: 35px;*/
        }

        @media screen and (max-width: 768px) {
            .main {
                width: 80%;
                margin-right: 5px;
            }

            .custom-wrapper {
                width: 100%;
                left: 0;
                padding: 0 10px;
            }

            .projtitle {
                width: 100%;
                position: relative;
                right: 26px;
            }

            .price-input {
                flex-direction: column;
                align-items: center;
            }

            .price-field {
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
<!--Main Navigation-->
<header>
    <!-- Jumbotron -->
    <div class="p-3 text-center bg-white border-bottom">
        <div class="container">
            <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                <a href="/trang-chu/index" class="d-flex align-items-center mb-2 mb-lg-0 link-body-emphasis text-decoration-none">
                    <img src="/api/read-file-by-img-url/Shoes6cop.png" width="90px" height="73px"/>
                </a>

                <ul class="ms-3 nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                    <li><a href="/trang-chu/index" class="nav-link px-2 link-body-emphasis">Trang chủ</a></li>
                    <li><a href="/list-san-pham/index" class="nav-link px-2 link-secondary">Sản phẩm</a></li>
                </ul>

                <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search" action="/api/list-san-pham/search" method="post"
                      th:object="${searchRequest}">
                    <div class="input-group float-center">
                                <span class="input-group-text text-primary">
                                    <i class="fas fa-search"></i>
                                </span>
                        <input th:field="*{ten}" type="text" class="form-control" placeholder="Nhập tên sản phẩm ">
                    </div>
                </form>

                <div th:if="${taiKhoan != null}" class="dropdown text-end me-3">
                    <a href="#" class="d-block link-body-emphasis text-decoration-none dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                        <img th:src="@{'/api/read-file-by-id-tai-khoan/' + ${taiKhoan.id}}" alt="mdo" width="48" height="48" class="rounded-circle">
                    </a>
                    <ul class="dropdown-menu text-small">
                        <li><a class="dropdown-item" href="/khach-hang/tai-khoan/ho-so">Thông tin</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" href="/logout">Đăng xuất</a></li>
                    </ul>
                </div>
                <a th:if="${taiKhoan != null}" href="/khach-hang/gio-hang-index"
                   class="border rounded py-1 px-3 nav-link d-flex align-items-center position-relative">
                    <i class="fas fa-shopping-cart m-1 me-md-2"></i>
                    <p class="d-none d-md-block mb-0">Giỏ hàng</p>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" th:text="${soSpTrongGh}"></span>
                </a>
                <a th:if="${taiKhoan == null}" href="/login"
                   class="me-1 border rounded py-1 px-3 nav-link d-flex align-items-center" >
                    <i class="fas fa-user-alt m-1 me-md-2"></i>
                    <p class="d-none d-md-block mb-0">Đăng nhập</p>
                </a>
            </div>
        </div>
    </div>
    <!-- Jumbotron -->

    <!-- Heading -->
    <div class="bg-primary mb-4">
        <div class="container py-4">
            <h3 class="text-white mt-2">Sản phẩm</h3>
<!--             Breadcrumb-->
<!--                        <nav class="d-flex mb-2">-->
<!--                            <h6 class="mb-0">-->
<!--                                <a href="" class="text-white-50">Trang chủ</a>-->
<!--                                <span class="text-white-50 mx-2"> > </span>-->
<!--                                <a href="" class="text-white-50">Danh sách sản phẩm</a>-->
<!--                                <span class="text-white-50 mx-2"> > </span>-->
<!--                            </h6>-->
<!--                        </nav>-->
<!--             Breadcrumb-->
        </div>
    </div>
    <!-- Heading -->
</header>

<!-- sidebar + content -->
<section class="">
    <div class="container">
        <div class="row">
            <!-- sidebar -->
            <div class="col-lg-3">
                <!-- Collapsible wrapper -->
                <div class="collapse card d-lg-block mb-5" id="navbarSupportedContent">
                    <div class="accordion" id="accordionPanelsStayOpenExample">
                        <form action="/api/list-san-pham/sidebar-filter" method="post"
                              th:object="${sideBarFilterRequest}">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button text-dark bg-light" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true"
                                            aria-controls="collapseOne">
                                        Loại giày
                                    </button>
                                </h2>
                                <div id="collapseOne" class="accordion-collapse collapse show"
                                     data-bs-parent="#accordionExample">
                                    <div class="accordion-body">
                                        <div class="row">
                                        <div th:each="data : ${theLoaiList}" class="form-check col-6">
                                            <input class="form-check-input" type="checkbox" th:field="*{theLoaiList}"
                                                   th:value="${data.id}">
                                            <label class="form-check-label" th:text="${data.tenTheLoai}"></label>
                                        </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button text-dark bg-light" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="true"
                                            aria-controls="collapseTwo">
                                        Thương hiệu
                                    </button>
                                </h2>
                                <div id="collapseTwo" class="accordion-collapse collapse show"
                                     data-bs-parent="#accordionExample">
                                    <div class="accordion-body">
                                        <div class="row">
                                        <div th:each="data : ${thuongHieuList}" class="form-check col-6">
                                            <input class="form-check-input" type="checkbox" th:field="*{thuongHieuList}"
                                                   th:value="${data.id}">
                                            <label class="form-check-label" th:text="${data.tenThuongHieu}"></label>
                                        </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button text-dark bg-light" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseSeven"
                                            aria-expanded="true"
                                            aria-controls="collapseSeven">
                                        Màu sắc
                                    </button>
                                </h2>
                                <div id="collapseSeven" class="accordion-collapse collapse show"
                                     data-bs-parent="#accordionExample">
                                    <div class="accordion-body">
                                        <div class="row">
                                            <div th:each="data : ${mauSacList}" class="form-check col-6">
                                                <input class="form-check-input" type="checkbox" th:field="*{mauSacList}"
                                                       th:value="${data.id}">
                                                <label class="form-check-label" th:text="${data.tenMauSac}"></label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button text-dark bg-light" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseThree"
                                            aria-expanded="true"
                                            aria-controls="collapseThree">
                                        Chất liệu
                                    </button>
                                </h2>
                                <div id="collapseThree" class="accordion-collapse collapse show"
                                     data-bs-parent="#accordionExample">
                                    <div class="accordion-body">
                                        <div class="row">
                                        <div th:each="data : ${chatLieuList}" class="form-check col-6">
                                            <input class="form-check-input" type="checkbox" th:field="*{chatLieuList}"
                                                   th:value="${data.id}">
                                            <label class="form-check-label" th:text="${data.tenChatLieu}"></label>
                                        </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button text-dark bg-light" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseFour"
                                            aria-expanded="true"
                                            aria-controls="collapseFour">
                                        Đế giày
                                    </button>
                                </h2>
                                <div id="collapseFour" class="accordion-collapse collapse show"
                                     data-bs-parent="#accordionExample">
                                    <div class="accordion-body">
                                        <div class="row">
                                        <div th:each="data : ${deGiayList}" class="form-check col-6">
                                            <input class="form-check-input" type="checkbox" th:field="*{deGiayList}"
                                                   th:value="${data.id}">
                                            <label class="form-check-label" th:text="${data.tenDeGiay}"></label>
                                        </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button text-dark bg-light" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseFive"
                                            aria-expanded="true"
                                            aria-controls="collapseFive">
                                        Size
                                    </button>
                                </h2>
                                <div id="collapseFive" class="accordion-collapse collapse show"
                                     data-bs-parent="#accordionExample">
                                    <div class="accordion-body">
<!--                                        <div th:each="data : ${kichThuocList}" class="form-check">-->
<!--                                            <input class="form-check-input" type="checkbox" th:field="${kichThuocList}"-->
<!--                                                   th:value="${data.id}">-->
<!--                                            <label class="form-check-label" th:text="${data.tenKichThuoc}"></label>-->
<!--                                        </div>-->
<!--                                        <div th:each="data, itemStat : ${kichThuocList}">-->
<!--                                            <input type="checkbox" class="btn-check" th:id="${'btn-check' + itemStat.index}"  th:field="${kichThuocList}" th:value="${data.id}"  />-->
<!--                                            <label class="btn btn-outline-success btn-sm" th:for="${'btn-check' + itemStat.index}" th:text="${data.tenKichThuoc}"></label>-->
<!--                                        </div>-->
<!--                                        <div class="cat" th:each="data, itemStat : ${kichThuocList}">-->
<!--                                            <label >-->
<!--                                                <input th:field="${kichThuocList}" th:value="${data.id}" type="checkbox" ><span th:text="${data.tenKichThuoc}"></span>-->
<!--                                            </label>-->
<!--                                        </div>-->

                                        <div class="row">
                                        <div th:each="data : ${kichThuocList}" class="form-check col-3">
                                            <input class="form-check-input" type="checkbox" th:field="*{kichThuocList}"
                                                   th:value="${data.id}">
                                            <label class="form-check-label" th:text="${data.tenKichThuoc}"></label>
                                        </div>
                                        </div>

<!--                                                <div th:each="data, itemStat : ${kichThuocList}">-->
<!--                                                    <input th:field="*{kichThuocList}" th:value="${data.id}" type="checkbox" class="btn-check" th:id="${'btn-check' + itemStat.index}" autocomplete="off">-->
<!--                                                    <label th:text="${data.tenKichThuoc}" class="btn btn-outline-primary btn-sm" th:for="${'btn-check' + itemStat.index}"></label>-->
<!--                                                </div>-->




                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button text-dark bg-light" type="button"
                                            data-bs-toggle="collapse" data-bs-target="#collapseSix" aria-expanded="true"
                                            aria-controls="collapseSix">
                                        Giá
                                    </button>
                                </h2>
                                <div id="collapseSix" class="accordion-collapse collapse show"
                                     data-bs-parent="#accordionExample">
                                    <div class="accordion-body">
                                        <div class="price-input-container">
                                            <div class="price-input">
                                                <div class="price-field">
                                                    <span>Từ</span>
                                                    <input type="number"
                                                           class="min-input"
                                                           th:field="*{startPrice}"
                                                           th:value="*{startPrice}">
                                                    <span class="price-field-span2">Đến</span>
                                                    <input type="number"
                                                           class="max-input"
                                                           th:field="*{endPrice}"
                                                           th:value="*{endPrice}">
                                                    <span class="price-field-span2">VNĐ</span>
                                                </div>
                                            </div>
                                            <div class="slider-container">
                                                <div class="price-slider">
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Slider -->
                                        <div class="range-input">
                                            <input type="range"
                                                   class="min-range"
                                                   min="0"
                                                   max="10000000"
                                                   step="100000"
                                                   th:field="*{startPrice}"
                                                   th:value="*{startPrice}">
                                            <input type="range"
                                                   class="max-range"
                                                   min="0"
                                                   max="10000000"
                                                   step="100000"
                                                   th:field="*{endPrice}"
                                                   th:value="*{endPrice}">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <button type="submit" class="btn btn-outline-primary w-100">
                                    <i class="bi bi-filter"></i>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <!-- sidebar -->
            <!-- content -->
            <div class="col-lg-9">
                <header class="d-sm-flex align-items-center border-bottom mb-4 pb-3">
                    <strong th:if="${pageData!=null}" class="d-block py-2" th:text="${pageData.nrOfElements + ' sản phẩm'}"> </strong>

                    <div class="ms-auto">
                        <form action="/api/list-san-pham/head-filter" method="post"
                              th:object="${headFilterRequest}">
                            <select th:field="*{kieuLoc}" class="form-select d-inline-block w-auto border pt-1">
                                <option th:value="0">Mới nhất</option>
                                <option th:value="1">Cũ nhất</option>
                                <option th:value="2">Giá tăng dần</option>
                                <option th:value="3">Giá giảm dần</option>
                            </select>
                            <div class="btn-group shadow-0 border">
                                <button type="submit" class="btn btn-outline-primary">
                                    <i class="bi bi-filter"></i>
                                </button>
                            </div>
                        </form>
                    </div>

                </header>
                <div th:if="${pageData == null}" class="row">
                    <div  class="alert alert-danger" role="alert">
                        Không có sản phẩm nào thỏa mãn điều kiện tìm kiếm
                    </div>
                </div>
                <div th:if="${pageData != null}" class="row">
                    <div th:each="data : ${pageData.pageList}" class="col-lg-4 col-md-6 col-sm-6 d-flex">
                        <div class="card w-100 my-2 shadow-2-strong">
                            <a th:href="@{'/khach-hang-san-pham/index/' + ${data.id} + '/' + ${data.mauSac.id} + '/' + ${data.kichThuoc.id}} " class="img-wrap">
                                <div th:if="${data.giaTri > 0}" th:text="${'-' + data.giaTri + '%'}"
                                     class="badge text-bg-success text-white position-absolute fs-6"
                                     style="top: 0.5rem; right: 0.5rem"></div>
                                <img th:src="@{'/api/read-file-by-idspct-return-anh-mac-dinh/' + ${data.id}}" alt="Không có ảnh"
                                     class="card-img-top" style="aspect-ratio: 1 / 1">
                            </a>
                            <div class="card-body d-flex flex-column">
                                <div class="d-flex flex-row" th:if="${data.giaTri > 0}">
                                    <h5 class="mb-1 me-1"
                                        th:text="${#numbers.formatDecimal(data.giaGiam, 0, 'COMMA', 0, 'POINT') + ' VNĐ'}" ></h5>
                                    <span  class="text-danger" style="font-size: smaller"><s
                                            th:text="${#numbers.formatDecimal(data.gia, 0, 'COMMA', 0, 'POINT') + ' VNĐ'}"></s></span>
                                </div>
                                <div class="d-flex flex-row" th:if="${data.giaTri <= 0}">
                                    <h5 class="mb-1 me-1"
                                        th:text="${#numbers.formatDecimal(data.gia, 0, 'COMMA', 0, 'POINT') + ' VNĐ'}" ></h5>

                                </div>
                                <p class="card-text" th:text="${data.tenSanPham}"></p>
                                <!--                                <div class="card-footer d-flex align-items-end pt-3 px-0 pb-0 mt-auto">-->
                                <!--                                    <a href="#!" class="btn btn-primary shadow-0 me-1">Thêm vào giỏ</a>-->
                                <!--                                </div>-->
                            </div>
                        </div>
                    </div>
                </div>

                <hr/>

                <!-- Pagination -->
                <nav th:if="${pageData != null}" aria-label="Page navigation example" class="d-flex justify-content-center mt-3">
                    <ul class="pagination">
                        <li th:if="${pageData.page < 1}" class="page-item disabled">
                            <a class="page-link" href="#" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <li th:if="${pageData.page > 0}" class="page-item">
                            <a class="page-link" href="#" aria-label="Previous"
                               th:href="@{|/list-san-pham/index?pageNumber=${pageData.page - 1}|}">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <li class="page-item active"><a class="page-link" href="#" th:text="${pageData.page + 1}"></a></li>
                        <li th:if="${pageData.page < pageData.pageCount - 1}" class="page-item">
                            <a class="page-link" href="#" aria-label="Next"
                               th:href="@{|/list-san-pham/index?pageNumber=${pageData.page + 1}|}">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                        <li th:if="${pageData.page == pageData.pageCount - 1}" class="page-item disabled">
                            <a class="page-link" href="#" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    </ul>
                </nav>
                <!-- Pagination -->
            </div>
        </div>
    </div>
</section>
<!-- sidebar + content -->

<!-- Footer -->
<footer class="text-center text-lg-start text-muted bg-primary mt-3">
    <!-- Section: Links  -->
    <section class="">
        <div class="container text-center text-md-start pt-4 pb-4">
            <!-- Grid row -->
            <div class="row mt-3">
                <!-- Grid column -->
                <div class="col-12 col-lg-3 col-sm-12 mb-2">
                    <!-- Content -->
                    <a  class="text-white h2">
                        SHOES 6
                    </a>
                    <p class="mt-1 text-white">
                        © 2024 Copyright: SHOES 6 FPT Polytechnic
                    </p>
                </div>
                <!-- Grid column -->

                <!-- Grid column -->
                <div class="col-6 col-sm-4 col-lg-2">
                    <!-- Links -->
                    <h6 class="text-uppercase text-white fw-bold mb-2">
                        Cơ sở Hà Nội
                    </h6>
                    <ul class="list-unstyled mb-4">
                        <p class="text-white-50">
                            P. Kiều Mai, Phúc Diễn, Từ Liêm, Hà Nội, Việt Nam
                        </p>
                    </ul>
                </div>
                <!-- Grid column -->

                <!-- Grid column -->
                <div class="col-6 col-sm-4 col-lg-2">
                    <!-- Links -->
                    <h6 class="text-uppercase text-white fw-bold mb-2">
                        Cơ sở Tp.HCM
                    </h6>
                    <ul class="list-unstyled mb-4">
                        <p class="text-white-50">
                            Tòa nhà QTSC9 (toà T), đường Tô Ký, phường Tân Chánh Hiệp, quận 12, TP HCM.
                        </p>
                    </ul>
                </div>
                <!-- Grid column -->

                <!-- Grid column -->
                <div class="col-6 col-sm-4 col-lg-2">
                    <!-- Links -->
                    <h6 class="text-uppercase text-white fw-bold mb-2">
                        Cơ sở Đà Nẵng
                    </h6>
                    <ul class="list-unstyled mb-4">
                        <p class="text-white-50">
                            219 Nguyễn Sinh Sắc, phường Hoà Minh, quận Liên Chiểu, TP Đà Nẵng
                        </p>
                    </ul>
                </div>
                <!-- Grid column -->

                <!-- Grid column -->
                <div class="col-6 col-sm-4 col-lg-2">
                    <!-- Links -->
                    <h6 class="text-uppercase text-white fw-bold mb-2">
                        Cơ sở Thái Nguyên
                    </h6>
                    <ul class="list-unstyled mb-4">
                        <p class="text-white-50">
                            Tòa nhà FPT Polytechnic, đường đê Mỏ Bạch, tổ 10, phường Quyết Thắng, TP Thái Nguyên, tỉnh
                            Thái Nguyên
                        </p>
                    </ul>
                </div>
                <!-- Grid column -->
            </div>
            <!-- Grid row -->
        </div>
    </section>
    <!-- Section: Links  -->
</footer>
<!-- Footer -->
</body>
<script>
    // Script.js
    const rangevalue =
        document.querySelector(".slider-container .price-slider");
    const rangeInputvalue =
        document.querySelectorAll(".range-input input");

    // Set the price gap
    let priceGap = 100000;

    // Adding event listners to price input elements
    const priceInputvalue =
        document.querySelectorAll(".price-input input");
    for (let i = 0; i < priceInputvalue.length; i++) {
        priceInputvalue[i].addEventListener("input", e => {

            // Parse min and max values of the range input
            let minp = parseInt(priceInputvalue[0].value);
            let maxp = parseInt(priceInputvalue[1].value);
            let diff = maxp - minp

            if (minp < 0) {
                alert("Vui lòng nhập giá > 0");
                priceInputvalue[0].value = 0;
                minp = 0;
            }

            // Validate the input values
            if (maxp > 10000000) {
                alert("Vui lòng nhập giá < 10 triệu");
                priceInputvalue[1].value = 10000000;
                maxp = 10000000;
            }

            if (minp > maxp - priceGap) {
                priceInputvalue[0].value = maxp - priceGap;
                minp = maxp - priceGap;

                if (minp < 0) {
                    priceInputvalue[0].value = 0;
                    minp = 0;
                }
            }

            // Check if the price gap is met
            // and max price is within the range
            if (diff >= priceGap && maxp <= rangeInputvalue[1].max) {
                if (e.target.className === "min-input") {
                    rangeInputvalue[0].value = minp;
                    let value1 = rangeInputvalue[0].max;
                    rangevalue.style.left = `${(minp / value1) * 100}%`;
                } else {
                    rangeInputvalue[1].value = maxp;
                    let value2 = rangeInputvalue[1].max;
                    rangevalue.style.right =
                        `${100 - (maxp / value2) * 100}%`;
                }
            }
        });

        // Add event listeners to range input elements
        for (let i = 0; i < rangeInputvalue.length; i++) {
            rangeInputvalue[i].addEventListener("input", e => {
                let minVal =
                    parseInt(rangeInputvalue[0].value);
                let maxVal =
                    parseInt(rangeInputvalue[1].value);

                let diff = maxVal - minVal

                // Check if the price gap is exceeded
                if (diff < priceGap) {

                    // Check if the input is the min range input
                    if (e.target.className === "min-range") {
                        rangeInputvalue[0].value = maxVal - priceGap;
                    } else {
                        rangeInputvalue[1].value = minVal + priceGap;
                    }
                } else {

                    // Update price inputs and range progress
                    priceInputvalue[0].value = minVal;
                    priceInputvalue[1].value = maxVal;
                    rangevalue.style.left =
                        `${(minVal / rangeInputvalue[0].max) * 100}%`;
                    rangevalue.style.right =
                        `${100 - (maxVal / rangeInputvalue[1].max) * 100}%`;
                }
            });
        }
    }
</script>
</html>

