
<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Cập nhật nhân viên</title>

    <!-- Favicon -->
    <link rel="shortcut icon" href="/assets/images/Shoes6cop.png"/>
    <link rel="stylesheet" href="/assets/css/backend-plugin.min.css">
    <link rel="stylesheet" href="/assets/css/backend.css?v=1.0.0">
    <link rel="stylesheet" href="/assets/vendor/@fortawesome/fontawesome-free/css/all.min.css">
    <link rel="stylesheet" href="/assets/vendor/line-awesome/dist/line-awesome/css/line-awesome.min.css">
    <link rel="stylesheet" href="/assets/vendor/remixicon/fonts/remixicon.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular-route.min.js"></script>

    <style>
        .profile-pic {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #ddd;
            margin-bottom: 20px; /* Tạo khoảng cách dưới ảnh */
        }

        .file-input-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }

        .file-input-wrapper input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        .toast-container {
            position: fixed;
            top: 100px;
            right: 500px;
            z-index: 1100;
        }
    </style>


</head>

<body ng-app="myAngularJs" ng-controller="myController">
<!-- loader Start -->
<div id="loading">
    <div id="loading-center">
    </div>
</div>
<!-- loader END -->
<!-- Wrapper Start -->
<div class="wrapper">
    <div class="iq-sidebar  sidebar-default ">
        <div class="iq-sidebar-logo d-flex align-items-center justify-content-between">
            <a href="../backend/index.html" class="header-logo">
                <img src="/api/read-file-by-img-url/Shoes6cop.png" class="img-fluid rounded-normal light-logo"
                     alt="logo"><h5 class="logo-title light-logo ml-3">SHOES 6</h5>
            </a>
            <div class="iq-menu-bt-sidebar ml-0">
                <i class="las la-bars wrapper-menu"></i>
            </div>
        </div>
        <div class="data-scrollbar" data-scroll="1">
            <nav class="iq-sidebar-menu">
                <ul id="iq-sidebar-toggle" class="iq-menu">
                    <li class="">
                        <a href="/admin/thong-ke/index" class="svg-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                 class="bi bi-speedometer2" viewBox="0 0 16 16">
                                <path d="M8 4a.5.5 0 0 1 .5.5V6a.5.5 0 0 1-1 0V4.5A.5.5 0 0 1 8 4M3.732 5.732a.5.5 0 0 1 .707 0l.915.914a.5.5 0 1 1-.708.708l-.914-.915a.5.5 0 0 1 0-.707M2 10a.5.5 0 0 1 .5-.5h1.586a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 10m9.5 0a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H12a.5.5 0 0 1-.5-.5m.754-4.246a.39.39 0 0 0-.527-.02L7.547 9.31a.91.91 0 1 0 1.302 1.258l3.434-4.297a.39.39 0 0 0-.029-.518z"/>
                                <path fill-rule="evenodd"
                                      d="M0 10a8 8 0 1 1 15.547 2.661c-.442 1.253-1.845 1.602-2.932 1.25C11.309 13.488 9.475 13 8 13c-1.474 0-3.31.488-4.615.911-1.087.352-2.49.003-2.932-1.25A8 8 0 0 1 0 10m8-7a7 7 0 0 0-6.603 9.329c.203.575.923.876 1.68.63C4.397 12.533 6.358 12 8 12s3.604.532 4.923.96c.757.245 1.477-.056 1.68-.631A7 7 0 0 0 8 3"/>
                            </svg>
                            <span class="ml-4">Thống kê</span>
                        </a>
                    </li>
                    <li class="">
                        <a href="/ban-hang-tai-quay" class="svg-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                 class="bi bi-cash-stack" viewBox="0 0 16 16">
                                <path d="M1 3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1zm7 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4"/>
                                <path d="M0 5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1zm3 0a2 2 0 0 1-2 2v4a2 2 0 0 1 2 2h10a2 2 0 0 1 2-2V7a2 2 0 0 1-2-2z"/>
                            </svg>
                            <span class="ml-4">Bán hàng tại quầy</span>
                        </a>
                    </li>
                    <li class="">
                        <a href="/hoa-don/hien-thi" class="svg-icon">
                            <svg class="svg-icon" id="p-dash7" width="20" height="20" xmlns="http://www.w3.org/2000/svg"
                                 viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                 stroke-linecap="round" stroke-linejoin="round">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                <line x1="16" y1="17" x2="8" y2="17"></line>
                                <polyline points="10 9 9 9 8 9"></polyline>
                            </svg>
                            <span class="ml-4">Quản lý đơn hàng</span>
                        </a>
                    </li>
                    <li class=" ">
                        <a href="#product" class="collapsed" data-toggle="collapse" aria-expanded="false">
                            <svg class="svg-icon" id="p-dash2" width="20" height="20" xmlns="http://www.w3.org/2000/svg"
                                 viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                 stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="9" cy="21" r="1"></circle>
                                <circle cx="20" cy="21" r="1"></circle>
                                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                            </svg>
                            <span class="ml-4">Quản lý sản phẩm</span>
                            <svg class="svg-icon iq-arrow-right arrow-active" width="20" height="20"
                                 xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="10 15 15 20 20 15"></polyline>
                                <path d="M4 4h7a4 4 0 0 1 4 4v12"></path>
                            </svg>
                        </a>
                        <ul id="product" class="iq-submenu collapse" data-parent="#iq-sidebar-toggle">
                            <li class="">
                                <a href="/admin/san-pham/index">
                                    <i class="las la-minus"></i><span>Sản phẩm</span>
                                </a>
                            </li>
                            <li class="">
                                <a href="/admin/de-giay/index-de-giay">
                                    <i class="las la-minus"></i><span>Đế giày</span>
                                </a>
                            </li>
                            <li class="">
                                <a href="/admin/loai-giay/index-loai-giay">
                                    <i class="las la-minus"></i><span>Loại giày</span>
                                </a>
                            </li>
                            <li class="">
                                <a href="/admin/thuong-hieu/index-thuong-hieu">
                                    <i class="las la-minus"></i><span>Thương hiệu</span>
                                </a>
                            </li>
                            <li class="">
                                <a href="/admin/chat-lieu/index-chat-lieu">
                                    <i class="las la-minus"></i><span>Chất liệu</span>
                                </a>
                            </li>
                            <li class="">
                                <a href="/admin/kich-co/index-kich-co">
                                    <i class="las la-minus"></i><span>Kích cỡ</span>
                                </a>
                            </li>
                            <li class="">
                                <a href="/admin/mau-sac/index-mau-sac">
                                    <i class="las la-minus"></i><span>Màu sắc</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class=" ">
                        <a href="#category" class="collapsed" data-toggle="collapse" aria-expanded="false">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                 class="bi bi-ticket-perforated" viewBox="0 0 16 16">
                                <path d="M4 4.85v.9h1v-.9zm7 0v.9h1v-.9zm-7 1.8v.9h1v-.9zm7 0v.9h1v-.9zm-7 1.8v.9h1v-.9zm7 0v.9h1v-.9zm-7 1.8v.9h1v-.9zm7 0v.9h1v-.9z"/>
                                <path d="M1.5 3A1.5 1.5 0 0 0 0 4.5V6a.5.5 0 0 0 .5.5 1.5 1.5 0 1 1 0 3 .5.5 0 0 0-.5.5v1.5A1.5 1.5 0 0 0 1.5 13h13a1.5 1.5 0 0 0 1.5-1.5V10a.5.5 0 0 0-.5-.5 1.5 1.5 0 0 1 0-3A.5.5 0 0 0 16 6V4.5A1.5 1.5 0 0 0 14.5 3zM1 4.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 .5.5v1.05a2.5 2.5 0 0 0 0 4.9v1.05a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-1.05a2.5 2.5 0 0 0 0-4.9z"/>
                            </svg>
                            <span class="ml-4">Giảm giá</span>
                            <svg class="svg-icon iq-arrow-right arrow-active" width="20" height="20"
                                 xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="10 15 15 20 20 15"></polyline>
                                <path d="M4 4h7a4 4 0 0 1 4 4v12"></path>
                            </svg>
                        </a>
                        <ul id="category" class="iq-submenu collapse" data-parent="#iq-sidebar-toggle">
                            <li class="">
                                <a href="/admin/giam-gia-san-pham/index">
                                    <i class="las la-minus"></i><span>Đợt giảm giá</span>
                                </a>
                            </li>
                            <li class="">
                                <a href="/admin/phieu-giam-gia/index">
                                    <i class="las la-minus"></i><span>Phiếu giảm giá</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class=" ">
                        <a href="#category2" class="collapsed" data-toggle="collapse" aria-expanded="false">
                            <svg class="svg-icon" id="p-dash8" width="20" height="20" xmlns="http://www.w3.org/2000/svg"
                                 viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                 stroke-linecap="round" stroke-linejoin="round">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>
                            <span class="ml-4">Tài khoản</span>
                            <svg class="svg-icon iq-arrow-right arrow-active" width="20" height="20"
                                 xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="10 15 15 20 20 15"></polyline>
                                <path d="M4 4h7a4 4 0 0 1 4 4v12"></path>
                            </svg>
                        </a>
                        <ul id="category2" class="iq-submenu collapse" data-parent="#iq-sidebar-toggle">
                            <li class="">
                                <a href="/admin/nhan-vien/index">
                                    <i class="las la-minus"></i><span>Nhân viên</span>
                                </a>
                            </li>
                            <li class="">
                                <a href="/tai-khoan/index">
                                    <i class="las la-minus"></i><span>Khách hàng</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </nav>
            <div class="p-3"></div>
        </div>
    </div>
    <div class="iq-top-navbar">
        <div class="iq-navbar-custom">
            <nav class="navbar navbar-expand-lg navbar-light p-0">
                <div class="iq-navbar-logo d-flex align-items-center justify-content-between">
                    <i class="ri-menu-line wrapper-menu"></i>
                    <a href="../backend/index.html" class="header-logo">
                        <img src="/api/read-file-by-img-url/Shoes6cop.png" class="img-fluid rounded-normal" alt="logo">
                        <h5 class="logo-title ml-3">SHOES 6</h5>

                    </a>
                </div>
                <div class="d-flex align-items-center">
                    <button class="navbar-toggler" type="button" data-toggle="collapse"
                            data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                            aria-label="Toggle navigation">
                        <i class="ri-menu-3-line"></i>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav ml-auto navbar-list align-items-center">
                            <li class="nav-item nav-icon search-content">
                                <a href="#" class="search-toggle rounded" id="dropdownSearch" data-toggle="dropdown"
                                   aria-haspopup="true" aria-expanded="false">
                                    <i class="ri-search-line"></i>
                                </a>
                                <div class="iq-search-bar iq-sub-dropdown dropdown-menu"
                                     aria-labelledby="dropdownSearch">
                                    <form action="#" class="searchbox p-2">
                                        <div class="form-group mb-0 position-relative">
                                            <input type="text" class="text search-input font-size-12"
                                                   placeholder="type here to search...">
                                            <a href="#" class="search-link"><i class="las la-search"></i></a>
                                        </div>
                                    </form>
                                </div>
                            </li>
                            <li class="nav-item nav-icon dropdown caption-content">
                                <a href="#" class="search-toggle dropdown-toggle" id="dropdownMenuButton4"
                                   data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <img src="/api/read-file-by-id-tai-khoan/{{taiKhoan.id}}" class="img-fluid rounded" alt="user">
                                </a>
                                <div class="iq-sub-dropdown dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    <div class="card shadow-none m-0">
                                        <div class="card-body p-0 text-center">
                                            <div class="media-body profile-detail text-center">
                                                <img src="/api/read-file-by-img-url/modern-sports-shoe-design-abstract-motion-generated-by-ai.jpg"
                                                     alt="profile-bg"
                                                     class="rounded-top img-fluid mb-4">
                                                <img src="/api/read-file-by-id-tai-khoan/{{taiKhoan.id}}" alt="profile-img"
                                                     class="rounded profile-img img-fluid avatar-70">
                                            </div>
                                            <div class="p-3">
                                                <h5 class="mb-1">{{taiKhoan.email}}</h5>
                                                <p class="mb-0">{{taiKhoan.hoVaTen}}</p>
                                                <div class="d-flex align-items-center justify-content-center mt-3">
                                                    <a href="/tai-khoan-quan-ly/ho-so" class="btn border mr-2">Thông
                                                        tin</a>
                                                    <a href="/logout" class="btn border">Đăng xuất</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
    </div>
    <div class="content-page">
        <div class="container-fluid">
<!--            Paste code vào đây-->

            <div class="card">
                <div class="card-header">
                    Cập nhật Nhân Viên
                </div>
                <div class="card-body">
                    <form  id="formTaiKhoan" method="post"  action="/api/uploadFile-detail-nhan-vien" enctype="multipart/form-data">
                        <div class="row">
                            <div class="col-3">
                                <div class="container mt-5">
                                    <div class="text-center">
                                        <img src="/api/read-file-nv/{{taiKhoanRequest.id}}" id="profilePic" class="profile-pic"
                                             alt="Profile Picture">
                                        <br>
                                        <div class="file-input-wrapper">
                                            <button class="btn btn-primary">Chọn ảnh</button>
                                            <!--                                                                        <input type="file" id="uploadProfilePic"-->
                                            <!--                                                                               file-model="taiKhoanRequest.anh">-->
                                            <input type="file" id="uploadProfilePic"
                                                   name="file" onchange="angular.element(this).scope().SelectFile(event)" accept="image/*">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-9">
                                <div class="row">
                                    <div class="col-sm-6 mb-3">
                                        <label class="form-label">Tên Nhân viên</label>
                                        <input type="text" class="form-control" ng-model="taiKhoanRequest.tenKhachHang">
                                        <div class="text-danger" ng-if="kiemTra.tenKhachHang">
                                            Vui lòng nhập họ tên
                                        </div>
                                    </div>
                                    <div class="col-sm-6 mb-3">
                                        <label class="form-label">Số căn cước công dân</label>
                                        <input type="text" class="form-control" ng-model="taiKhoanRequest.soCanCuoc">
                                        <div class="text-danger" ng-if="kiemTra.soCanCuoc">
                                            Vui lòng nhập số căn cước
                                        </div>
                                        <div class="text-danger" ng-if="form.soCanCuoc.$error.pattern">
                                            Số căn cước công dân chỉ được chứa số.
                                        </div>
                                        <div class="text-danger" ng-if="checkTrung.soCanCuoc">
                                            Số Căn cước không được trùng với nhân viên khác!
                                        </div>
                                    </div>
                                    <div class="col-sm-6 mb-3">
                                        <label class="form-label">Số điện thoại</label>
                                        <input type="text" class="form-control" ng-model="taiKhoanRequest.sdt">
                                        <div class="text-danger" ng-if="kiemTra.sdt">
                                            Vui lòng nhập số điện thoại
                                        </div>
                                        <div class="text-danger" ng-if="dinhDang.sdt">
                                            Số điện thoại sai định dạng
                                        </div>
                                        <div class="text-danger" ng-if="checkTrung.sdt">
                                            Số điện thoại đã tồn tại
                                        </div>

                                    </div>
                                    <div class="col-sm-6 mb-3">
                                        <label class="form-label">email</label>
                                        <input type="email" class="form-control" ng-model="taiKhoanRequest.email">
                                        <div class="text-danger" ng-if="kiemTra.email">
                                            Vui lòng nhập email
                                        </div>
                                        <div class="text-danger" ng-if="dinhDang.email">
                                            Email sai định dạng
                                        </div>
                                        <div class="text-danger" ng-if="checkTrung.email">
                                            Email đã tồn tại
                                        </div>

                                    </div>
                                    <div class="col-sm-6 mb-3">
                                        <label class="form-label">Ngày sinh</label>
                                        <input type="date" class="form-control" ng-model="taiKhoanRequest.ngaySinh">
                                        <div class="text-danger" ng-if="kiemTra.ngaySinh">
                                            Vui lòng chọn ngày sinh
                                        </div>
                                    </div>

                                    <!-- Tỉnh/Thành -->
                                    <div class="col-sm-4 mb-3">
                                        <p class="mb-0">Tỉnh/Thành</p>
                                        <select ng-model="taiKhoanRequest.idTinh"
                                                ng-change="selectTinhThanhUpdate()" class="form-control">
                                            <option ng-value="0" disabled selected>Chọn Tỉnh/Thành</option>
                                            <option ng-repeat="item in listTinhThanh" ng-value="item.ProvinceID"
                                                    value="item.ProvinceID">
                                                {{item.ProvinceName}}
                                            </option>
                                        </select>
                                        <div class="text-danger" ng-if="kiemTra.tinh">
                                            Vui lòng chọn tỉnh
                                        </div>
                                    </div>

                                    <!-- Quận/Huyện -->
                                    <div class="col-sm-4 mb-3">
                                        <p class="mb-0">Quận/Huyện</p>
                                        <select ng-model="taiKhoanRequest.idHuyen"
                                                ng-change="selectQuanHuyenUpdate()" class="form-control">
                                            <option ng-value="0" disabled selected>Chọn Quận/Huyện</option>
                                            <option ng-repeat="item in listQuanHuyen" ng-value="item.DistrictID">
                                                {{item.DistrictName}}
                                            </option>
                                        </select>
                                        <div class="text-danger" ng-if="kiemTra.huyen">
                                            Vui lòng chọn huyện
                                        </div>
                                    </div>

                                    <!-- Xã/Phường -->
                                    <div class="col-sm-4 mb-3">
                                        <p class="mb-0">Xã/Phường</p>
                                        <select ng-model="taiKhoanRequest.idXa" class="form-control">
                                            <option value="0" disabled selected>Chọn Xã/Phường</option>
                                            <option ng-repeat="item in listXaPhuong" ng-value="item.WardCode">
                                                {{item.WardName}}
                                            </option>
                                        </select>
                                        <div class="text-danger" ng-if="kiemTra.xa">
                                            Vui lòng chọn xã
                                        </div>
                                    </div>
                                    <div class="col-sm-12 mb-3">
                                        <p class="mb-0">Địa chỉ cụ thể</p>
                                        <div class="form-outline">
                                            <input ng-model="taiKhoanRequest.diaChi" type="text"
                                                   placeholder="Ví dụ: Tòa nhà FPT Polytechnic, 13 phố Trịnh Văn Bô"
                                                   class="form-control"
                                                   ng-blur="checkDiaChi()"/>
                                        </div>
                                        <div class="text-danger" ng-if="kiemTra.diaChi">
                                            Vui lòng nhập địa chỉ cụ thể
                                        </div>
                                    </div>
<!--                                    <div class="col-sm-6 mb-3">-->
<!--                                        <label class="form-label">Trạng thái</label>-->
<!--                                        <select ng-model="taiKhoanRequest.trangThai" class="form-control">-->
<!--                                            <option value="2" disabled selected>Chọn trạng thái</option>-->
<!--                                            <option ng-value="1">Hoạt động</option>-->
<!--                                            <option ng-value="0">Ngừng hoạt động</option>-->
<!--                                        </select>-->
<!--                                        <div class="text-danger" ng-if="kiemTra.trangThai">-->
<!--                                            Vui lòng chọn trạng thái-->
<!--                                        </div>-->
<!--                                    </div>-->

<!--                                    <div class="col-sm-6 mb-3">-->
<!--                                        <label class="form-label">Giới tính</label><br>-->
<!--                                        <input class="form-check-input" type="radio" name="gioiTinh" ng-value="1" ng-model="taiKhoanRequest.gioiTinh">-->
<!--                                        <label class="form-check-label">Nam</label>-->
<!--                                        <input class="form-check-input" type="radio" name="gioiTinh" ng-value="0" ng-model="taiKhoanRequest.gioiTinh">-->
<!--                                        <label class="form-check-label">Nữ</label>-->
<!--                                    </div>-->

                                    <div class="mb-3">
                                        <label class="form-label">Trạng thái</label>
                                        <select ng-model="taiKhoanRequest.trangThai" class="form-control">
                                            <option ng-value="2" disabled selected>Chọn trạng thái</option>
                                            <option ng-value="1">Hoạt động</option>
                                            <option ng-value="0">Ngừng hoạt động</option>
                                        </select>
                                        <div class="text-danger" ng-if="kiemTra.trangThai">
                                            Vui lòng chọn trạng thái
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">Giới tính</label><br>
                                        <div class="custom-control custom-radio custom-radio-color custom-control-inline">
                                            <input type="radio" name="gioiTinh" ng-value="1" id="nam"
                                                   ng-model="taiKhoanRequest.gioiTinh" class="custom-control-input bg-primary">
                                            <label class="custom-control-label" for="nam">Nam</label>
                                        </div>
                                        <div class="custom-control custom-radio custom-radio-color custom-control-inline">
                                            <input type="radio" name="gioiTinh" ng-value="0" id="nu"
                                                   ng-model="taiKhoanRequest.gioiTinh" class="custom-control-input bg-primary">
                                            <label class="custom-control-label" for="nu">Nữ</label>
                                        </div>
                                    </div>


                                    <div class="text-center mt-3 mb-5">
                                        <button ng-click="updateNv()" type="button" class="btn btn-outline-success" style="width: 100px; margin-top: 100px">Cập nhật
                                        </button>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Wrapper End-->
<footer class="iq-footer">
    <div class="container-fluid">
        <div class="card">
            <div class="card-body">
                <div class="row">
                    <div class="col-lg-6">
                        <ul class="list-inline mb-0">
                            <li class="list-inline-item"><a href="#">Chính sách bảo mật</a></li>
                            <li class="list-inline-item"><a href="#">Điều khoản</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-6 text-right">
                        <span class="mr-1">2024©</span> <a href="#" class="">SHOES 6</a>.
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
</body>
<script src="/assets/js/backend-bundle.min.js"></script>
<script src="/assets/js/table-treeview.js"></script>
<script src="/assets/js/customizer.js"></script>
<script async="" src="/assets/js/chart-custom.js"></script>
<script src="/assets/js/app.js"></script>
<script>


    const apiGetTinhThanh = "https://dev-online-gateway.ghn.vn/shiip/public-api/master-data/province";
    const apiGetQuanHuyen = "https://dev-online-gateway.ghn.vn/shiip/public-api/master-data/district";
    const apiGetXaPhuong = "https://dev-online-gateway.ghn.vn/shiip/public-api/master-data/ward?district_id=";
    const apiUpdate = "/api/nhan-vien/update-nv";

    const apiSetTaiKhoan="/kh/tai-khoan/api/set-tai-khoan";

    const apiGetTaiKhoan="/kh/tai-khoan/api/get-tai-khoan";

    const apiDetailNhanVien = "/api/nhan-vien/detail-nhan-vien";

    const token = "69ea89dc-44f2-11ef-8e53-0a00184fe694";

    let myApp = angular.module("myAngularJs", ['ngRoute']);
    myApp.controller("myController", myFunction);
    function myFunction($scope, $http, $window) {
        $http.get("/api/khach-hang/trang-chu/get-tai-khoan")
            .then(function (res) {
                if (res.status == 200) {
                    $scope.taiKhoan = res.data
                    if ($scope.taiKhoan == '') {
                        $scope.taiKhoan = null
                    }
                    return $scope.taiKhoan
                }
            })
        $scope.getDetailNhanVien = function (){
            return $http.get(apiDetailNhanVien)
        }

        $scope.getDetailNhanVien()
            .then(function (res){
                if (res.status == 200) {
                    $scope.taiKhoanRequest = {
                        id:res.data.id,
                        anh:res.anh,
                        tenKhachHang: res.data.tenKhachHang,
                        email: res.data.email,
                        sdt: res.data.sdt,
                        ngaySinh: new Date(res.data.ngaySinh),
                        gioiTinh: parseInt(res.data.gioiTinh),
                        trangThai:parseInt(res.data.trangThai),
                        soCanCuoc:res.data.soCanCuoc,
                        idTinh:res.data.idTinh,
                        idHuyen:res.data.idHuyen,
                        idXa:res.data.idXa,
                        diaChi:res.data.diaChi,
                    }
                    console.log("$scope.taiKhoanRequest", $scope.taiKhoanRequest)
                    $scope.selectTinhThanhUpdate();
                    $scope.selectQuanHuyenUpdate();
                }
            })

        $http.get(apiGetTaiKhoan).then(function(res){
            if(res.status==200){
                $scope.taiKhoanRequest={
                    tenKhachHang: res.data.tenKhachHang,
                    soCanCuoc:res.data.soCanCuoc,
                    email: res.data.email,
                    sdt: res.data.sdt,
                    ngaySinh: res.data.ngaySinh != null ? new Date(res.data.ngaySinh):null,  // Chuyển đổi chuỗi thành Date
                    gioiTinh: res.data.gioiTinh,
                    idTinh: parseInt(res.data.idTinh),
                    idHuyen: parseInt(res.data.idHuyen),
                    idXa: res.data.idXa,
                    diaChi: res.data.diaChi,
                    trangThai: res.data.trangThai+""
                };
                // Gọi hàm để load danh sách huyện dựa trên tỉnh đã chọn
                $scope.selectTinhThanh();
                // Gọi hàm để load danh sách xã/phường dựa trên huyện đã chọn
                $scope.selectQuanHuyen();
            }

        })

        $scope.SelectFile = function (e) {

            let newList = {
                anh: $scope.taiKhoanRequest.anh,
                tenKhachHang: $scope.taiKhoanRequest.tenKhachHang,
                email: $scope.taiKhoanRequest.email,
                soCanCuoc: $scope.taiKhoanRequest.soCanCuoc,
                sdt: $scope.taiKhoanRequest.sdt,
                ngaySinh: $scope.taiKhoanRequest.ngaySinh,
                gioiTinh: $scope.taiKhoanRequest.gioiTinh,
                idTinh: $scope.taiKhoanRequest.idTinh,
                idHuyen: $scope.taiKhoanRequest.idHuyen,
                idXa: $scope.taiKhoanRequest.idXa,
                diaChi: $scope.taiKhoanRequest.diaChi,
                trangThai: $scope.taiKhoanRequest.trangThai
            }
            $http.post(
                apiSetTaiKhoan,//link api
                newList //dữ liệu thêm vào api
            )
            document.getElementById("formTaiKhoan").submit();
        };

        // Load Tỉnh/Thành
        $scope.loadProvinces = function () {
            $http.get(apiGetTinhThanh, {headers: {"Token": token}})
                .then(function (response) {
                    $scope.listTinhThanh = response.data.data;
                })
                .catch(function (error) {
                    console.error('Error loading provinces:', error);
                });
        };

        // Load Quận/Huyện dựa trên Tỉnh/Thành đã chọn
        $scope.selectTinhThanh = function () {
            if ($scope.taiKhoanRequest.idTinh) {
                $http.get(`${apiGetQuanHuyen}?province_id=${$scope.taiKhoanRequest.idTinh}`, {headers: {"Token": token}})
                    .then(function (response) {
                        $scope.listQuanHuyen = response.data.data;
                    })
                    .catch(function (error) {
                        console.error('Error loading districts:', error);
                    });
            } else {
                $scope.listQuanHuyen = [];
                $scope.listXaPhuong = [];
            }
        };

        // Load Xã/Phường dựa trên Quận/Huyện đã chọn
        $scope.selectQuanHuyen = function () {
            if ($scope.taiKhoanRequest.idHuyen) {
                $http.get(`${apiGetXaPhuong}${$scope.taiKhoanRequest.idHuyen}`, {headers: {"Token": token}})
                    .then(function (response) {
                        $scope.listXaPhuong = response.data.data;
                    })
                    .catch(function (error) {
                        console.error('Error loading wards:', error);
                    });
            } else {
                $scope.listXaPhuong = [];
            }
        };

        $scope.loadProvinces();

        $scope.updateNv = function () {

            $scope.kiemTra = {
                tenKhachHang: false,
                sdt: false,
                email: false,
                ngaySinh: false,
                tinh: false,
                huyen: false,
                xa: false,
                diaChi: false,
                gioiTinh: false
            };
            $scope.dinhDang = {
                email: false,
                sdt: false
            };
            //Tạo 1 biến để kiểm tra
            let flag = true;
            let checkMail = true;
            let checkSDT = true;
            if (!$scope.taiKhoanRequest || !$scope.taiKhoanRequest.tenKhachHang) {
                flag = false;
                $scope.kiemTra.tenKhachHang = true
            }
            if (!$scope.taiKhoanRequest || !$scope.taiKhoanRequest.ngaySinh) {
                flag = false;
                $scope.kiemTra.ngaySinh = true
            }
            if (!$scope.taiKhoanRequest || !$scope.taiKhoanRequest.email) {
                flag = false;
                $scope.kiemTra.email = true;
                checkMail = false
            }
            if (!$scope.taiKhoanRequest || !$scope.taiKhoanRequest.idTinh) {
                flag = false;
                $scope.kiemTra.tinh = true;
            }
            if (!$scope.taiKhoanRequest || !$scope.taiKhoanRequest.idHuyen) {
                flag = false;
                $scope.kiemTra.huyen = true;
            }
            if (!$scope.taiKhoanRequest || !$scope.taiKhoanRequest.idXa || $scope.taiKhoanRequest.idXa==0) {
                flag = false;
                $scope.kiemTra.xa = true;
            }
            if (!$scope.taiKhoanRequest || !$scope.taiKhoanRequest.diaChi) {
                flag = false;
                $scope.kiemTra.diaChi = true;
            }

            // if (!$scope.taiKhoanRequest || !$scope.taiKhoanRequest.trangThai) {
            //     flag = false;
            //     $scope.kiemTra.trangThai = true;
            // }

            const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            if (checkMail && re.test($scope.taiKhoanRequest.email) == false) {
                flag = false;
                $scope.dinhDang.email = true;
            }

            if (!$scope.taiKhoanRequest || !$scope.taiKhoanRequest.sdt) {
                flag = false;
                $scope.kiemTra.sdt = true;
                checkSDT = false
            }
            var vnf_regex = /(84|0[3|5|7|8|9])+([0-9]{8})\b/g;
            if (checkSDT && vnf_regex.test($scope.taiKhoanRequest.sdt) == false) {
                flag = false;
                $scope.dinhDang.sdt = true;
            }
            $scope.checkTrung = {
                sdt: false,
                email: false,
                soCanCuoc:false
            }

            const apiCheckSdtUpdate = "/nv/tai-khoan/api/sdt-update";
            $http.get(apiCheckSdtUpdate + "?sdt=" + $scope.taiKhoanRequest.sdt + "&id=" + $scope.taiKhoanRequest.id).then(function (response) {
                if (response.status == 200) {
                    $scope.getSdt = response.data;
                    if ($scope.getSdt !== "") {
                        flag = false;
                        $scope.checkTrung.sdt = true
                    }
                }
            }).then(function (res){
                const apiCheckEmailUpdate = "/nv/tai-khoan/api/email-update";
                $http.get(apiCheckEmailUpdate + "?email=" + $scope.taiKhoanRequest.email + "&id=" + $scope.taiKhoanRequest.id).then(function (response) {
                    if (response.status == 200) {
                        $scope.getEmail = response.data;
                        if ($scope.getEmail !== "") {
                            flag = false;
                            $scope.checkTrung.email = true
                        }
                    }
                }).then(function (res){
                    const apiCheckSoccUpdate = "/nv/tai-khoan/api/socc-update";
                    $http.get(apiCheckSoccUpdate + "?soCanCuoc=" + $scope.taiKhoanRequest.soCanCuoc + "&id=" + $scope.taiKhoanRequest.id).then(function (response) {
                        if (response.status == 200) {
                            $scope.getScc = response.data;
                            if ($scope.getScc !== "") {
                                flag = false;
                                $scope.checkTrung.soCanCuoc = true
                            }
                        }
                    })
                })
                    .then(function (res){
                    if (flag) {

                        let newList = {
                            anh: $scope.taiKhoanRequest.anh,
                            tenKhachHang: $scope.taiKhoanRequest.tenKhachHang,
                            email: $scope.taiKhoanRequest.email,
                            soCanCuoc: $scope.taiKhoanRequest.soCanCuoc,
                            sdt: $scope.taiKhoanRequest.sdt,
                            ngaySinh: $scope.taiKhoanRequest.ngaySinh,
                            gioiTinh: $scope.taiKhoanRequest.gioiTinh,
                            idTinh: $scope.taiKhoanRequest.idTinh,
                            idHuyen: $scope.taiKhoanRequest.idHuyen,
                            idXa: $scope.taiKhoanRequest.idXa,
                            diaChi: $scope.taiKhoanRequest.diaChi,
                            trangThai: $scope.taiKhoanRequest.trangThai
                        }
                        Swal.fire({
                            title: 'Bạn có muốn cập nhật thông tin nhân viên?',
                            icon: 'warning',
                            showCancelButton: true,
                            confirmButtonColor: '#3085d6',
                            cancelButtonColor: '#d33',
                            confirmButtonText: 'Xác nhận',
                            cancelButtonText: 'Hủy'
                        })
                            .then((result) => {
                                if (result.isConfirmed) {
                                    $http.put(
                                        apiUpdate,//link api
                                        newList // Dữ liệu gửi lên API
                                    ).then(function (res) {
                                        if (res.status == 200) {
                                            Swal.fire(
                                                'Cập nhật thành công!',
                                                'Thông tin đã cập nhật thành công.',
                                                'success'
                                            ).then(() => {
                                                $window.location.href = "/admin/nhan-vien/index";
                                            }).catch(function (error) {
                                                console.error('Error:', error); // Xử lý lỗi nếu yêu cầu POST thất bại
                                            });
                                        }
                                    });
                                }
                            });

                    }
                })

            })
            //





        }
        // Load Quận/Huyện dựa trên Tỉnh/Thành đã chọn
        $scope.selectTinhThanhUpdate = function () {
            if ($scope.taiKhoanRequest.idTinh) {
                $http.get(`${apiGetQuanHuyen}?province_id=${$scope.taiKhoanRequest.idTinh}`, {headers: {"Token": token}})
                    .then(function (response) {
                        $scope.listQuanHuyen = response.data.data;
                    })
                    .catch(function (error) {
                        console.error('Error loading districts:', error);
                    });
            } else {
                $scope.listQuanHuyen = [];
                $scope.listXaPhuong = [];
            }
        };
        // Load Xã/Phường dựa trên Quận/Huyện đã chọn
        $scope.selectQuanHuyenUpdate = function () {
            if ($scope.taiKhoanRequest.idHuyen) {
                $http.get(`${apiGetXaPhuong}${$scope.taiKhoanRequest.idHuyen}`, {headers: {"Token": token}})
                    .then(function (response) {
                        $scope.listXaPhuong = response.data.data;
                    })
                    .catch(function (error) {
                        console.error('Error loading wards:', error);
                    });
            } else {
                $scope.listXaPhuong = [];
            }
        };

        // Khởi tạo bằng cách load danh sách Tỉnh/Thành
        $scope.loadProvinces();

    }


    document.getElementById('uploadProfilePic').addEventListener('change', function (event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                document.getElementById('profilePic').src = e.target.result;
            };
            reader.readAsDataURL(file);
        }
    });




    // document.addEventListener('contextmenu', function(e) {
    //     e.preventDefault(); // Ngăn chuột phải
    // });
    //
    // document.addEventListener('keydown', function(e) {
    //     if (e.keyCode === 123) {
    //         e.preventDefault();
    //     }
    // });



</script>
</html>